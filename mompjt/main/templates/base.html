<!--
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
base.html - ë§˜ìŠ¤ë¡œê·¸ í”„ë¡œì íŠ¸ ì „ì²´ ë ˆì´ì•„ì›ƒ ë² ì´ìŠ¤ í…œí”Œë¦¿
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
ì‘ì„±ì¼: 2025-12-29
ìš©ë„: 
  - ì „ì²´ í”„ë¡œì íŠ¸ì˜ ê³µí†µ ë ˆì´ì•„ì›ƒ (í—¤ë”, ë„¤ë¹„ê²Œì´ì…˜, í‘¸í„°)
  - ëª¨ë“  í˜ì´ì§€ì—ì„œ extendsí•˜ì—¬ ì‚¬ìš©
  - í†µí•© ê²€ìƒ‰ì°½, ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ í¬í•¨
í¬í•¨ ìš”ì†Œ:
  - í—¤ë”: ë¡œê³ , ê²€ìƒ‰ì°½, ë¡œê·¸ì¸/ë¡œê·¸ì•„ì›ƒ
  - ë„¤ë¹„ê²Œì´ì…˜: ê³µì§€ì‚¬í•­, ììœ ê²Œì‹œíŒ, ë²¼ë£©ì‹œì¥, ì§€ë„, ì±—ë´‡
  - í‘¸í„°: ì €ì‘ê¶Œ ì •ë³´
  - block content: ê° í˜ì´ì§€ ì½˜í…ì¸  ì˜ì—­
â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•â•
-->{% load static %}
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ë§˜ìŠ¤ë¡œê·¸ - ì—„ë§ˆë“¤ì˜ ë”°ëœ»í•œ ê³µê°„</title>
    <link href="https://fonts.googleapis.com/css2?family=Nanum+Gothic:wght@400;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="{% static 'css/style.css' %}?v=2">
    <link rel="stylesheet" href="{% static 'css/dropdown.css' %}">
    <link rel="stylesheet" href="{% static 'css/signup.css' %}">
</head>
<link rel="shortcut icon" href="{% static 'images/favicon.png' %}" type="image/x-icon">
<link rel="icon" href="{% static 'images/favicon.png' %}" type="image/x-icon">
<body>
    <header>
        <div class="header-top">
            <div class="container">
                <h1 class="logo">
                <a href="{% url 'main:index' %}">
                    <img src="{% static 'images/logo2.png' %}" alt="ë§˜ìŠ¤ë¡œê·¸ ë¡œê³ ">
                </a>
            </h1>
                <form class="search-bar" method="get" action="{% url 'main:search' %}">
                    <input type="text" name="q" placeholder="ê¶ê¸ˆí•œ ì •ë³´ë¥¼ ê²€ìƒ‰í•´ë³´ì„¸ìš”." value="{{ q|default:'' }}">
                    <button type="submit">ğŸ”</button>
                </form>
                <div class="top-links">
                    {% if user.is_authenticated %}
                        <!-- 25-12-29 ìŠ¬ê¸° ìˆ˜ì •: ì•Œë¦¼ ì•„ì´ì½˜ ì¶”ê°€ -->
                        <a href="{% url 'board:notification_list' %}" class="notification-icon">
                            ğŸ””
                            {% with unread_count=user.notifications.count %}
                            {% if unread_count > 0 %}
                                <span class="notification-badge" id="notifBadge">{{ unread_count }}</span>
                            {% endif %}
                            {% endwith %}
                        </a>
                        <span class="grade-badge">{{ user.get_grade_display }}</span>
                        <span> <b>{{ user.nickname }}</b>ë‹˜ í™˜ì˜í•©ë‹ˆë‹¤!</span>
                        | <a href="{% url 'accounts:profile_auth' %}">ë§ˆì´í˜ì´ì§€</a>
                        | <a href="{% url 'accounts:logout' %}">ë¡œê·¸ì•„ì›ƒ</a>
                    {% else %}
                        <a href="{% url 'accounts:login' %}">ë¡œê·¸ì¸</a> 
                        | <a href="{% url 'accounts:signup' %}">íšŒì›ê°€ì…</a>
                        | <a href="/admin/">ê´€ë¦¬ì</a>
                    {% endif %}
                </div>
            </div>
        </div>
        
        <nav class="main-nav">
            <div class="container">
                <ul id="mainMenu">
                    <li><a href="{% url 'board:notice_list' %}">ê³µì§€ì‚¬í•­</a></li>
                    
                    <li class="has-sub">
                        <a href="javascript:void(0)" onclick="toggleMenu(this)">ììœ ê²Œì‹œíŒ</a>
                        <ul class="dropdown-menu">
                            <li><a href="{% url 'board:free_list' %}">ì „ì²´ë³´ê¸°</a></li>
                            <li><a href="#">ìœ¡ì•„ ìˆ˜ë‹¤</a></li>
                            <li><a href="#">ë‚¨í¸ ë’·ë‹´í™”</a></li>
                            <li><a href="#">ì‹œëŒ/ì¹œì •</a></li>
                            <li><a href="#">ì„ì‹ ì¶œì‚°</a></li>
                        </ul>
                    </li>

                    <li class="has-sub">
                        <a href="javascript:void(0)" onclick="toggleMenu(this)">í•«ë”œê³µìœ </a>
                        <ul class="dropdown-menu">
                            <li><a href="#">ì „ì²´ë³´ê¸°</a></li>
                            <li><a href="#">ìœ¡ì•„ìš©í’ˆ í•«ë”œ</a></li>
                            <li><a href="#">ìƒí™œìš©í’ˆ í•«ë”œ</a></li>
                            <li><a href="#">ì´ë²¤íŠ¸/ì²´í—˜ë‹¨</a></li>
                        </ul>
                    </li>

                    <li class="has-sub">
                        <a href="javascript:void(0)" onclick="toggleMenu(this)">ìš”ë¦¬ë ˆì‹œí”¼</a>
                        <ul class="dropdown-menu">
                            <li><a href="#">ì „ì²´ë³´ê¸°</a></li>
                            <li><a href="#">ì´ˆê¸° ì´ìœ ì‹</a></li>
                            <li><a href="#">ì¤‘ê¸°/í›„ê¸° ì´ìœ ì‹</a></li>
                            <li><a href="#">ìœ ì•„ì‹ ë°˜ì°¬</a></li>
                        </ul>
                    </li>

                    <li><a href="#">ë°˜ë ¤ë™ë¬¼</a></li>

                    <li class="has-sub">
                        <a href="javascript:void(0)" onclick="toggleMenu(this)">ìœ¡ì•„ì •ë³´</a>
                        <ul class="dropdown-menu">
                            <li><a href="#">ì „ì²´ë³´ê¸°</a></li>
                            <li><a href="#">ì›”ë ¹ë³„ ë°œë‹¬</a></li>
                            <li><a href="#">ìˆ˜ë©´êµìœ¡</a></li>
                            <li><a href="#">í›ˆìœ¡ ë…¸í•˜ìš°</a></li>
                        </ul>
                    </li>

                    <li><a href="{% url 'board:flea_list' %}">ë²¼ë£©ì‹œì¥</a></li>
                    <li><a href="{% url 'main:growth_chart' %}">ìš°ë¦¬ì•„ì´ì„±ì¥ê¸°ë¡</a></li>
                    <li><a href="/map/">ìš°ë¦¬ë™ë„¤ì§€ë„</a></li>
                </ul>
            </div>
        </nav>
    </header>

    {% if messages %}
        <div class="msg-wrap" id="msgWrap">
            {% for message in messages %}
            <div class="msg
                {% if message.tags == 'success' %}msg-success{% endif %}
                {% if message.tags == 'error' %}msg-error{% endif %}
                {% if message.tags == 'info' %}msg-info{% endif %}
            ">
                {{ message }}
            </div>
            {% endfor %}
        </div>

        <script>
            setTimeout(() => {
                const wrap = document.getElementById('msgWrap');
                if (!wrap) return;
                wrap.style.opacity = '0';
                setTimeout(() => wrap.remove(), 400);
            }, 2500);
        </script>
    {% endif %}

    <main class="container main-content">
        {% block content %}
        {% endblock %}
    </main>

    <footer>
        <div class="container">
            <p>Â© 2025 ë§˜ìŠ¤ë¡œê·¸ ë² ì´ë¹„. All rights reserved.</p>
        </div>
    </footer>

    {% include 'chatbot/chatbot_widget.html' %}

    <script>
        // í˜ì´ì§€ ë¡œë“œ ì‹œ ëª¨ë“  ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ì´ˆê¸°í™”
        document.addEventListener('DOMContentLoaded', function() {
            const dropdowns = document.querySelectorAll('.dropdown-menu');
            const items = document.querySelectorAll('.has-sub');
            
            dropdowns.forEach(menu => {
                menu.classList.remove('show');
            });
            items.forEach(item => {
                item.classList.remove('active');
            });
        });

        function toggleMenu(element) {
            // 1. í´ë¦­í•œ ë©”ë‰´ì˜ ë¶€ëª¨ li ì°¾ê¸°
            const parentLi = element.parentElement;
            
            // 2. ê·¸ ì•ˆì— ìˆëŠ” ë“œë¡­ë‹¤ìš´ ë©”ë‰´ ì°¾ê¸°
            const dropdown = parentLi.querySelector('.dropdown-menu');
            
            // 3. ì´ë¯¸ ì—´ë ¤ìˆëŠ” ë‹¤ë¥¸ ë©”ë‰´ë“¤ì€ ë‹«ê¸° (í•˜ë‚˜ë§Œ ì—´ë¦¬ê²Œ)
            const allDropdowns = document.querySelectorAll('.dropdown-menu');
            const allItems = document.querySelectorAll('.has-sub');

            allDropdowns.forEach(menu => {
                if (menu !== dropdown) {
                    menu.classList.remove('show');
                }
            });
            allItems.forEach(item => {
                if (item !== parentLi) {
                    item.classList.remove('active');
                }
            });

            // 4. í´ë¦­í•œ ë©”ë‰´ í† ê¸€ (ì—´ê¸°/ë‹«ê¸°)
            if (dropdown) {
                dropdown.classList.toggle('show');
                parentLi.classList.toggle('active');
            }
        }

        // í™”ë©´ì˜ ë¹ˆ ê³³ì„ í´ë¦­í•˜ë©´ ë©”ë‰´ ë‹«ê¸°
        window.onclick = function(event) {
            // ë©”ë‰´ í† ê¸€ ë²„íŠ¼ í´ë¦­ì´ ì•„ë‹Œ ê²½ìš° ëª¨ë“  ë©”ë‰´ ë‹«ê¸°
            if (!event.target.closest('.has-sub > a')) {
                const dropdowns = document.getElementsByClassName("dropdown-menu");
                const items = document.getElementsByClassName("has-sub");
                
                for (let i = 0; i < dropdowns.length; i++) {
                    if (dropdowns[i].classList.contains('show')) {
                        dropdowns[i].classList.remove('show');
                    }
                }
                for (let i = 0; i < items.length; i++) {
                    items[i].classList.remove('active');
                }
            }
        }
    </script>
</body>
</html>